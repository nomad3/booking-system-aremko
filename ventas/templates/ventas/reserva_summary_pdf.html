{% load humanize %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resumen de Reserva #{{ reserva.id }}</title>
    <style>
        /* Estilos básicos para PDF */
        body { font-family: DejaVu Sans, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #000; padding: 5px; text-align: left; }
        ul { list-style: none; padding: 0; }
    </style>
</head>
<body>
    <h1>Resumen de Reserva #{{ reserva.id }}</h1>
    <h2>Información General</h2>
    <ul>
        <li>Cliente: {{ reserva.cliente.nombre }} ({{ reserva.cliente.telefono }})</li>
        <li>Fecha de creación: {{ reserva.fecha_creacion|date:"d-m-Y H:i" }}</li>
        <li>Fecha de reserva: {{ reserva.fecha_reserva|date:"d-m-Y H:i" }}</li>
        <li>Total: ${{ reserva.total }}</li>
        <li>Pagado: ${{ reserva.pagado }}</li>
        <li>Saldo pendiente: ${{ reserva.saldo_pendiente }}</li>
        <li>Estado de reserva: {{ reserva.get_estado_reserva_display }}</li>
        <li>Estado de pago: {{ reserva.get_estado_pago_display }}</li>
    </ul>

    {% if reserva.reservaproductos.all %}
    <h2>Productos</h2>
    <table>
        <thead>
            <tr><th>Producto</th><th>Cantidad</th><th>Precio Unitario</th><th>Subtotal</th></tr>
        </thead>
        <tbody>
            {% for item in reserva.reservaproductos.all %}
            <tr>
                <td>{{ item.producto.nombre }}</td>
                <td>{{ item.cantidad }}</td>
                <td>${{ item.producto.precio_base }}</td>
                <td>${{ item.cantidad|multiply:item.producto.precio_base }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if reserva.reservaservicios.all %}
    <h2>Servicios</h2>
    <table>
        <thead>
            <tr><th>Servicio</th><th>Personas</th><th>Precio Unitario</th><th>Subtotal</th></tr>
        </thead>
        <tbody>
            {% for item in reserva.reservaservicios.all %}
            <tr>
                <td>{{ item.servicio.nombre }}</td>
                <td>{{ item.cantidad_personas }}</td>
                <td>${{ item.servicio.precio_base }}</td>
                <td>${{ item.cantidad_personas|multiply:item.servicio.precio_base }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</body>
</html> 